"use strict";var portfolioApp=angular.module("portfolioApp",["ngRoute","ngResource","ngCookies","ngSanitize","ngAnimate","mgcrea.ngStrap","angular-carousel","angular-tour"]);portfolioApp.config(["$routeProvider","$logProvider",function(a,b){b.debugEnabled(!1),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl as Main"})}]),angular.module("portfolioApp").controller("MainCtrl",["$location","$scope","GetJson","$anchorScroll","$filter","$modal",function(a,b,c){var d=this;d.contactExpanded=!1,d.toggleContactInfo=function(){d.contactExpanded=!d.contactExpanded,console.log(d.contactExpanded)},d.currentStep=0,d.postTour=function(){console.log("tour over!")},d.postStep=function(){console.log("step over!")},d.tourShowZoom=!1,d.showZoomImg=function(){d.tourShowZoom=!d.tourShowZoom},d.tour=[{body:"On scroll and click this directive iterates a variable <span class='monospace'>active</span> which toggles classes made in a recursive less loop.",snippet:'div.circle-{{ $index }} ng-class="{ \'active\' : $index == {{ active }} }<br/><br/>.classLoop(@index) when (@index < 100) {<br/><span class="tab"></span>#circle-@{ index } {<br/><span class="tab"></span><span class="tab"></span>width: @index*20px;<br/><span class="tab"></span><span class="tab"></span>height: @index*20px;<br/><span class="tab"></span><span class="tab"></span>margin-left: -@index*10px;<br/><span class="tab"></span><span class="tab"></span>margin-top: -@index*10px;<br/><span class="tab"></span><span class="tab"></span>.rotate(@index * 3deg);<br/><span class="tab"></span><span class="tab">&.active {<br/><span class="tab"></span><span class="tab"></span><span class="tab"></span>border: 1px solid white;<br/><span class="tab"></span><span class="tab"></span><span class="tab"></span>etc.<br/><span class="tab"></span><span class="tab"></span>}<br/><span class="tab"></span>}<br/><span class="tab"></span>.classLoop(@index+1);<br/>}<br/>.classLoop(0);'},{body:"The world doesn't need another jQuery plugin. But it could use some more angularJs shiny bits.<br/><br/>Using only angularJs' selectors and event handlers, this directive dynamically tracks and positions two differently resolutioned images to make an illusion of zooming. Fork it on <a href='http://github.com'>github.</a>",snippet:""},{body:"",snippet:"",action:null},{body:"",snippet:"",action:null}],c.getGallery().then(function(a){d.gallery=a}),c.getGrid().then(function(a){d.gridCaptions=a}),d.rotators=["portfolio_gallery/shoe/shoe1.png","portfolio_gallery/shoe/shoe2.png","portfolio_gallery/shoe/shoe3.png","portfolio_gallery/shoe/shoe4.png","portfolio_gallery/shoe/shoe5.png","portfolio_gallery/shoe/shoe6.png","portfolio_gallery/shoe/shoe7.png","portfolio_gallery/shoe/shoe8.png"],d.activeRotator=0,d.frontEndAssets=[{url:"portfolio_gallery/assets/angularLogo.png",blurb:{title:"Besides using AngularJs for this static site, I've worked in this intuitive and powerful framework building a financial-planning app, a scholarship foundation's internal portal and too many interactive lists and forms to count. It's the best.",container:"body",html:!0}},{url:"portfolio_gallery/assets/backboneLogo.png",blurb:{title:"Check out my General Assembly final project written in Rails, Backbone Js and jQuery. Be gentile. I wrote it with 3 months experience. Plus, it's hosted on Heroku for free and is therefore very slow.",container:"body"}},{url:"portfolio_gallery/assets/jqueryLogo.png",blurb:{title:"Trying to wean myself off jQuery in favor of AngularJs, but it's essential to know. Besides jQLite, there is no jQuery on this site.",container:"body"}},{url:"portfolio_gallery/twigLogo.png",blurb:{title:"An intuitive PHP based templating language. I've used it in tandem with Craft, a Yii PHP based CMS.",container:"body"}},{url:"portfolio_gallery/assets/lessLogo.png",blurb:{title:"This project is styled in Less. Check out the tour to see some fun recursive functions.",container:"body"}},{url:"portfolio_gallery/assets/sassLogo.png",blurb:{title:"Like Sass, it's an essential.",container:"body"}}],d.backEndAssets=[{url:"portfolio_gallery/assets/salesforceLogo.png",blurb:{title:"Incredibly powerful Cloud CRM. The majority of my recent back-end work has been in SalesForce's Java-based Apex code.",container:"body"}},{url:"portfolio_gallery/assets/nodejsLogo.png",blurb:{title:"Used it to build a headless NodeJs app which served as a waypoint to migrate data from Stripe's API to a SalesForce database.",container:"body"}},{url:"portfolio_gallery/assets/mongodbLogo.png",blurb:{title:"Used it to build a headless NodeJs app which served as a waypoint to migrate data from Stripe's API to a SalesForce database.",container:"body"}},{url:"portfolio_gallery/assets/railsLogo.png",blurb:{title:"",container:"body"}},{url:"portfolio_gallery/assets/craftLogo.png",blurb:{title:"test test test test test",container:"body"}},{url:"portfolio_gallery/assets/postgresqlLogo.png",blurb:{title:"test test test test test",container:"body"}}],d.showContact=!1,angular.element(window).bind("scroll",function(){b.$apply(this.pageYOffset>2e3&&this.pageYOffset<=2100?d.contact={"margin-top":2100-this.pageYOffset+"px"}:this.pageYOffset>2e3?d.contact={"margin-top":"0px"}:d.contact={"margin-top":"100px"})})}]),portfolioApp.directive("aboutSection",[function(){return{restrict:"A",scope:!0,link:function(a,b,c){var d,e,f,g,h=angular.element(window),i=h.innerHeight(),b=angular.element(b),j=b.offset().top,k=.9*i,l=angular.element(document),m=l.height(),n=!!c.aboutSectionTransitionTarget&&angular.element(c.aboutSectionTransitionTarget);angular.element(b).css({"min-height":k}),h.bind("resize",function(){i=h.innerHeight(),m=angular.element(document).height(),k=1.1*i,angular.element(b).css({"min-height":k})}),l.on("scroll",function(){e=h.scrollTop(),f=e-j+k,f>0&&k>f&&(b.hasClass("active")||b.addClass("active"),n&&(g=e-j,d=-1*g/k,n.css({"margin-top":parseInt(n.css("height"))*d})))})}}}]),portfolioApp.directive("galleryZoom",["$timeout",function(){return{restrict:"E",controllerAs:"galleryZoom",templateUrl:"views/partials/galleryImage.html",link:function(a,b,c){a.imgLrg=c.galleryZoomImgLrg,a.imgZoom=c.galleryZoomImgZoom},controller:function(a,b,c){function d(){u.offsetHeight?(g=.8*window.innerHeight,h=u.offsetHeight,e=v.offsetWidth,f=v.offsetHeight,i=u.offsetWidth,j=1.4*h,k=1.4*i,t.showLrg=!0,t.imgContainer={height:g+"px"},angular.element("#gallery-carousel").css("height",g),t.imgLrg={height:g+"px"},t.zoomView={"margin-left":i*-.5+"px"},t.imgLrg["margin-left"]=i*-.5+"px",t.imgZoom={height:j+"px"}):c(function(){d()},100)}{var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u=(angular.element(window),b.find(".img-container")[0],b.find(".img-lrg img")[0]),v=b.find(".img-zoom")[0];b.find(".img-zoom img")[0]}t.showZoom=!1,t.showLrg=!1,angular.element(u).on("load",d),window.onresize=function(){d()},t.mousemove=function(a){l=a.pageX-u.offsetLeft,m=a.pageY-u.offsetTop-2e3,n=a.offsetX/u.offsetWidth,o=a.offsetY/u.offsetHeight,p=-1*n*e,q=-1*o*f,t.zoomView.webkitTransform="translate3D("+(a.offsetX+p)+"px, "+(a.offsetY+q)+"px, 0px)",r=n*(e-k),s=o*(f-j),t.imgZoom.webkitTransform="translate3D("+r+"px, "+s+"px, 0px)"},t.toggleZoom=function(){t.showZoom=!t.showZoom}}}}]),portfolioApp.directive("concentric",["$timeout",function(){return{restrict:"E",scope:"=",controllerAs:"Concentric",templateUrl:"views/partials/concentric.html",controller:["$scope","$element","$timeout","$interval",function(a,b,c,d){function e(){f=window.innerHeight,g.logoContainer=g.inner=g.outer={top:.5*f}}{var f,g=this;b.find("#logo")[0],b.find("#concentric-inner")[0],b.find("#concentric-outer")[0],angular.element(document)}e(),window.onresize=function(){e()},g.logoLimit=new Array(11),g.innerLimit=g.outerLimit=new Array(85);var h,i=0;g.magicShimmer=!1,g.shimmer=function(a){g.shimmerActive=i||g.logoLimit.length+1,g.magicShimmer=a&&!g.magicShimmer,h||(h=d(function(){g.shimmerActive=a?g.shimmerActive<g.logoLimit.length?g.shimmerActive+=1:1:g.shimmerActive>1?g.shimmerActive-=1:g.logoLimit.length},a&&30||60))},g.endShimmer=function(a){h&&(g.magicShimmer=a&&!g.magicShimmer,d.cancel(h),i=g.shimmerActive,c(function(){g.shimmerActive=g.logoLimit.length}),h=null)};var j,k=!1;g.random=Math.floor(4*Math.random()),g.active=0,g.radiate=function(){g.endShimmer(),g.random=Math.floor(4*Math.random()),g.active=0,k=!1,d.cancel(j),j=d(function(){g.active=k?g.active-=1:g.active+=1,g.active===g.outerLimit.length&&(k=!0),0===g.active&&k&&g.shimmer()},40,2*g.outerLimit.length)};var l,m=angular.element(window);g.dulled=!1,m.bind("scroll",function(){g.dulled=m.scrollTop()<=1500?!1:!0,m.scrollTop()<=2e3&&(g.endShimmer,l=m.scrollTop()/2e3,a.$apply(g.active=Math.round(80*l)))}),g.scrollTo=function(a){angular.element("html, body").animate({scrollTop:angular.element(a).offset().top},angular.element(a).offset().top)}}]}}]),portfolioApp.directive("shoeZoom",["$timeout","$q",function(){return{restrict:"E",controllerAs:"shoeZoom",templateUrl:"views/partials/shoeDisplay.html",link:function(a,b,c){var d=!!c.shoeZoomOptions&&a.$eval(c.shoeZoomOptions);a.imgDefault=d.default,a.imgZoom=d.zoom},controller:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this,z=(angular.element(window),b.find(".img-container")[0]),A=(b.find(".img-lrg")[0],b.find(".img-lrg img")[0]),B=(b.find(".img-zoom img")[0],b.find(".img-zoom")[0]),C=B.offsetWidth,D=B.offsetHeight,E=70;y.lrgLoaded=!1,y.showZoom=!1,y.imgZoom={},y.imgContainer={},y.gridContianer={},window.onresize=function(){F()};var F=function(){y.lrgLoaded=!0,g=A.offsetHeight,h=A.offsetWidth,i=1.4*g,j=1.4*h,y.imgContainer={height:.85*g+"px"},y.imgZoom={height:i+"px"},y.gridContainer={height:g,width:h},d=.85*g,e=z.offsetWidth,f=e-h,u=h/g,v=Math.ceil(E/u),w=h/E,x=g/v};y.gridBox=function(a){return{height:w+"px",top:w*a.row,left:x*a.column}},angular.element(A).on("load",F);var G;y.mousemove=function(b){k=b.pageX-z.offsetLeft,l=b.pageY-z.offsetTop-2e3,m=k/e,n=l/d,m>.06&&.3>m?t=1:m>.3&&.43>m?t=0:m>.43&&.5>m?t=7:m>.5&&.56>m?t=6:m>.56&&.64>m?t=5:m>.64&&.8>m?t=4:m>.8&&.94>m&&(t=3),c.cancel(G),G=c(function(){a.$parent.Main.activeRotator=8>t?t++:t=0},850),a.$parent.Main.activeRotator=t,o=m*f,y.containerLrg={webkitTransform:"translate3D("+o+"px, 0px, 0px)"},p=-1*m*C,q=-1*n*D,y.captionContainer={webkitTransform:"translate3D("+(k+p)+"px, "+(l+q)+"px, 0px)"},r=m*(C-j),s=n*(300-i),y.imgZoom.webkitTransform="translate3D("+r+"px, "+s+"px, 0px)"};var H,I,J,K,L,M,N,O,P;a.$watch("Main.gridCaptions",function(a,b){a&&!b&&(H=a)}),y.activateBox=function(a){if(a.description){for(a.toggled=!0,y.groundedCaption=a.description,I=angular.copy(a),J="string"==typeof I.description?I.description.split(""):I.description,K=[],L="",M=0,N=J.length>25?-1*Math.floor(J.indexOf(" ",25)/2):-1*Math.floor(J.length/2),P=0;P<J.length;P++)O={},O.letter=J[P],P>25&&" "==J[P]&&!L&&(L="line-break_",N=Math.floor((P-J.length)/2),M=0),0>N?(O.index=L+N,N++):(O.index=L+M,M++),K.push(O);I.description=K,y.activeBox=I,H[I.column+1][I.row+1].toggled=!0,H[I.column+1][I.row-1].toggled=!0,H[I.column-1][I.row-1].toggled=!0,H[I.column-1][I.row+1].toggled=!0,H[I.column][I.row-1].toggled=!0,H[I.column][I.row+1].toggled=!0,H[I.column-1][I.row].toggled=!0,H[I.column+1][I.row].toggled=!0}};var H,I,Q,R,P,S;y.regenerateGrid=function(){y.showZoom=!y.showZoom,R=function(a){P=0,S=0;var b=H[P].length;Q=c(function(){for(S=0;b>S;S++)H[P][S].regenerate=a;P++,P==H.length&&(c.cancel(Q),Q=void 0,a&&R(!1))},3)},Q||R(!0)}}}}]),function(){angular.module("angular-tour",["angular-tour.tour"]),angular.module("angular-tour.tour",[]).constant("tourConfig",{placement:"top",animation:!0,nextLabel:"Next",scrollSpeed:750,offset:28}).controller("TourController",["$scope","orderedList",function(a,b){var c=this,d=c.steps=b();c.postTourCallback=angular.noop,c.postStepCallback=angular.noop,c.tourAction=angular.noop,c.currentStep=0,a.$watch(function(){return c.currentStep},function(a){c.select(a)}),c.select=function(a){if(angular.isNumber(a)){c.unselectAllSteps();var b=d.get(a);b&&(b.ttOpen=!0),c.currentStep!==a&&(c.currentStep=a),a>=d.getCount()&&c.postTourCallback(),c.postStepCallback()}},c.addStep=function(a){angular.isNumber(a.index)&&!isNaN(a.index)?d.set(a.index,a):d.push(a)},c.unselectAllSteps=function(){d.forEach(function(a){a.ttOpen=!1})},c.cancelTour=function(){c.unselectAllSteps(),c.postTourCallback()},a.openTour=function(){var a=c.currentStep>=d.getCount()||c.currentStep<0?0:c.currentStep;c.select(a)},a.closeTour=function(){c.cancelTour()}}]).directive("tour",["$parse",function(a){return{controller:"TourController",restrict:"EA",scope:!0,link:function(b,c,d,e){if(!angular.isDefined(d.step))throw"The <tour> directive requires a `step` attribute to bind the current step to.";var f=a(d.step);b.$watch(d.step,function(a){e.currentStep=a}),e.postTourCallback=function(){angular.isDefined(d.postTour)&&b.$parent.$eval(d.postTour)},e.postStepCallback=function(){angular.isDefined(d.postStep)&&b.$parent.$eval(d.postStep)},b.setCurrentStep=function(a){f.assign(b.$parent,a),e.currentStep=a},b.getCurrentStep=function(){return e.currentStep}}}}]).directive("tourtip",["$window","$compile","$interpolate","$timeout","scrollTo","tourConfig",function(a,b,c,d,e,f){var g=(c.startSymbol(),c.endSymbol(),"<div tour-popup></div>");return{require:"^tour",restrict:"EA",scope:!0,link:function(c,h,i,j){function k(){var b,d,g,i,j,k,l;if(c.ttContent){c.ttAnimation?m.fadeIn():m.css({display:"block"}),h.after(m),l=h.children().eq(0).length>0?h.children().eq(0):h;var n=function(){switch(b=l.position(),d=m.width(),g=m.height(),k=l.width(),j=l.height(),c.ttPlacement){case"right":i={top:b.top,left:b.left+k+c.ttOffset};break;case"bottom":i={top:b.top+j+c.ttOffset,left:b.left};break;case"left":i={top:b.top,left:b.left-d-c.ttOffset};break;default:i={top:b.top-g-c.ttOffset,left:b.left}}i.top+="px",i.left+="px",m.css(i),"top"!=c.ttPlacement?e(m,-200,-300,f.scrollSpeed):e("top")};angular.element(a).bind("resize."+c.$id,function(){n()}),n()}}function l(){m.detach(),angular.element(a).unbind("resize."+c.$id)}i.$observe("tourtip",function(a){c.ttContent=a}),i.$observe("tourSnippet",function(a){c.ttSnippet=a}),i.$observe("tourtipPlacement",function(a){c.ttPlacement=a||f.placement}),i.$observe("tourtipNextLabel",function(a){c.ttNextLabel=a||f.nextLabel}),i.$observe("tourtipOffset",function(a){c.ttOffset=parseInt(a,10)||f.offset}),c.ttAction=c.$eval(i.tourAction),c.ttOpen=!1,c.ttAnimation=f.animation,c.index=parseInt(i.tourtipStep,10);var m=b(g)(c);j.addStep(c),d(function(){c.$watch("ttOpen",function(a){a?k():l()})},500),c.$on("$destroy",function(){angular.element(a).unbind("resize."+c.$id),m.remove(),m=null})},controller:function(a){a.invokeTourAction=function(a){console.log(a),a.call()}}}}]).directive("tourPopup",function(){return{replace:!0,templateUrl:"tour/tour.tpl.html",scope:!0,restrict:"EA",link:function(){}}}).factory("orderedList",function(){var a=function(){this.map={},this._array=[]};a.prototype.set=function(a,b){if(angular.isNumber(a))if(a in this.map)this.map[a]=b;else{if(a<this._array.length){var c=a-1>0?a-1:0;this._array.splice(c,0,a)}else this._array.push(a);this.map[a]=b,this._array.sort(function(a,b){return a-b})}},a.prototype.indexOf=function(a){for(var b in this.map)if(this.map.hasOwnProperty(b)&&this.map[b]===a)return Number(b)},a.prototype.push=function(a){var b=this._array[this._array.length-1]+1||0;this._array.push(b),this.map[b]=a,this._array.sort(function(a,b){return a-b})},a.prototype.remove=function(a){var b=this._array.indexOf(a);if(-1===b)throw new Error("key does not exist");this._array.splice(b,1),delete this.map[a]},a.prototype.get=function(a){return this.map[a]},a.prototype.getCount=function(){return this._array.length},a.prototype.forEach=function(a){for(var b,c,d=0;d<this._array.length;d++)b=this._array[d],c=this.map[b],a(c,b)},a.prototype.first=function(){var a,b;return a=this._array[0],b=this.map[a]};var b=function(){return new a};return b}).factory("scrollTo",function(){return function(a,b,c,d){console.log(a,b,c,d),a&&"top"!=a?(b=b||-100,c=c||-100,d=d||500,$("html,body").stop().animate({scrollTop:a.offset().top+b,scrollLeft:a.offset().left+c},d)):"top"==a?$("html,body").stop().animate({scrollTop:0},3e3):$("html,body").stop().animate({scrollTop:0},d)}})}(window,document),portfolioApp.factory("GetJson",["$http","$q",function(a,b){return{getGallery:function(){var c=b.defer();return a({method:"GET",url:"/data/gallery.json"}).success(function(a){c.resolve(a)}),c.promise},getGrid:function(){var c=b.defer();return a({method:"GET",url:"/data/grid.json"}).success(function(a){c.resolve(a)}),c.promise}}}]);