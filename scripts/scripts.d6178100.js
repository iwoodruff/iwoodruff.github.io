"use strict";var portfolioApp=angular.module("portfolioApp",["ngRoute","ngResource","ngCookies","ngSanitize","ngAnimate","mgcrea.ngStrap"]);portfolioApp.config(["$routeProvider","$logProvider",function(a,b){b.debugEnabled(!1),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl as Main"})}]),angular.module("portfolioApp").controller("MainCtrl",["$location","$scope","GetJson","$anchorScroll",function(a,b,c){var d=this;c.getGallery().then(function(a){d.gallery=a});for(var e=[],f=0,g=0;77>g;g++){e[g]=[];for(var h=0;22>h;h++)e[g][h]={description:""},e[g][h].id=f,e[g][h].row=h,e[g][h].column=g,f++}d.activeBox={},d.addDescription=function(a){angular.element("#description-input").focus(),d.activeBox=a},d.gridCaptions=e,d.exportDescriptions=function(){var a=JSON.stringify(d.gridCaptions),b="data:text/json;charset=utf8,"+encodeURIComponent(a);window.open(b,"_blank"),window.focus()},d.index=0,d.updateIndex=function(a){d.index=a}}]),portfolioApp.directive("aboutSection",[function(){return{restrict:"A",scope:!0,link:function(a,b,c){var d,e,f,g,h=angular.element(window),i=h.innerHeight(),b=angular.element(b),j=b.offset().top,k=1.1*i,l=angular.element(document),m=l.height(),n=!!c.aboutSectionTransitionTarget&&angular.element(c.aboutSectionTransitionTarget);angular.element(b).css({"min-height":k}),h.bind("resize",function(){i=h.innerHeight(),m=angular.element(document).height(),k=1.1*i,angular.element(b).css({"min-height":k})}),l.on("scroll",function(){e=h.scrollTop(),f=e-j+k,f>0&&k>f?(b.hasClass("active")||b.addClass("active"),n&&(g=e-j,d=-1*g/k,n.css({"margin-top":parseInt(n.css("height"))*d}))):b.hasClass("active")&&b.removeClass("active")})}}}]),portfolioApp.directive("parallaxZoom",["$timeout","$q",function(){return{restrict:"E",priority:5,templateUrl:"views/partials/galleryImage.html",link:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=angular.element(window),w=(angular.element("body"),.8*v.innerHeight()),x=angular.element(b.find(".img-container")),y=angular.element(b.find(".img-lrg img")),z=angular.element(b.find(".img-zoom")),A=angular.element(b.find(".img-zoom img")),B=w-angular.element("nav").height(),C=parseInt(z.css("width")),D=parseInt(z.css("height"));a.zoomLoaded=!1,u=!!c.parallaxZoomOptions&&a.$eval(c.parallaxZoomOptions),a.hoverGrid=!!u.hoverGrid,a.imgDefault=u.default,a.imgZoom=u.zoom,u.fullWidth||x.css({height:B}),y.bind("load",function(){a.$apply(function(){a.lrgLoaded=!0}),u.fullWidth?(h=parseInt(y.css("height")),i=parseInt(v.innerWidth()),j=1.4*h,x.css({height:h}),A.css({height:j}),v.bind("resize",function(){h=parseInt(y.css("height")),x.css({height:h}),A.css({height:j})})):(parseInt(y.css("height"))<B?(y.addClass("img-wide").css("margin-top",parseInt(y.css("height"))*-.5),z.addClass("img-wide").css("margin-top",parseInt(y.css("height"))*-.5),j=1.4*parseInt(y.css("height"))):(j=1.4*B,y.css({height:B})),A.css({height:j}),v.bind("resize",function(){B=.8*v.innerHeight(),x.css({height:B}),y.css({height:B}),j=1.4*B,A.css({height:j}),k=parseInt(A.css("width")),d=i-k,e=h-j}),y.css({"margin-left":parseInt(y.css("width"))*-.5}),z.css({"margin-left":parseInt(y.css("width"))*-.5}),h=parseInt(y.css("height")),i=parseInt(y.css("width"))),A.bind("load",function(){a.$apply(function(){a.zoomLoaded=!0}),k=parseInt(A.css("width")),d=i-k,e=h-j,a.parallaxZoom=function(a){a?y.bind("mousemove",function(a){l=l||y.offset(),m=m||parseInt(l.left),n=n||parseInt(l.top),o=a.pageX-m,p=a.pageY-n,f=o/i,g=p/h,s=-1*f*C,t=-1*g*D,z.css({webkitTransform:"translate3D("+(o+s)+"px, "+(p+t)+"px, 0px)"}),q=f*(C-k),r=g*(D-j),A.css({webkitTransform:"translate3D("+q+"px, "+r+"px, 0px)"})}):(y.unbind("mousemove"),l=void 0,m=void 0,n=void 0)}})})},controller:function(a){var b=this;this.zoomLoaded=a.zoomLoaded,this.lrgLoaded=a.lrgLoaded,a.$watch("lrgLoaded",function(a,c){a!==c&&a===!0&&(b.lrgLoaded=!0)}),a.showZoom=!1,a.toggleZoom=function(){a.zoomLoaded?(a.showZoom=!a.showZoom,a.parallaxZoom(a.showZoom)):a.$watch("zoomLoaded",function(b,c){b!==c&&b===!0&&(a.showZoom=!a.showZoom,a.parallaxZoom(a.showZoom))})}}}}]),portfolioApp.directive("scrollParallax",["$timeout",function(){return{restrict:"A",priority:3,link:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B=angular.element(window),C=B.innerHeight(),D=(angular.element("body"),'<div class="parallax-window"></div>'),E=!!c.parallaxScrollOptions&&a.$eval(c.parallaxScrollOptions),F=!!E.target&&angular.element(b.find(E.target));h=E.resizeRatioX||1,g=E.resizeRatioY||1,e=angular.element(E.scrollingOn?b.find(E.scrollingOn):document),f=e.innerHeight(),B.bind("resize",function(){C=B.innerHeight(),u()}),d=F.wrap(D).parent(),d.find("img").length>0?d.find("img").bind("load",function(){i=parseInt(F.css("height")),j=parseInt(F.css("width")),u()}):(i=parseInt(F.css("height")),j=parseInt(F.css("width")),u()),u=function(){if(i>0&&j>0){k=i*g,l=j*h,d.css({height:i,width:j}),F.css({height:k,width:l});var a=F.find(".img-lrg img");F.find(".img-zoom img").css({width:1.4*a.css("width")}),m=i-k,n=j-l,A()}},A=function(){e.bind("scroll",function(){s=B.scrollTop()/(f-C),r=-1*m*s,x(void 0,r)}),o=F.offset(),p=parseInt(o.top),q=parseInt(o.left),d.bind("mousemove",function(){v=event.pageX-q,t=v/j,console.log(j,l),w=n*t,x(w)})},x=function(a,b){y=a||y||0,z=b||z||0,F.css({webkitTransform:"translate3D("+y+"px, "+z+"px, 0px)"})}}}}]),portfolioApp.directive("hoverGrid",["$compile",function(){return{restrict:"A",priority:1,link:function(a,b,c){var d,e,f,g,h=angular.element(window),i=(h.innerHeight(),angular.element("body"),!!c.hoverGridOptions&&a.$eval(c.hoverGridOptions)),j=!!i.target&&angular.element(i.target),k=!!i.totalBoxesX&&i.totalBoxesX,l=angular.element(b);j?j.bind("load",function(){e=parseInt(j.css("height")),f=parseInt(j.css("width")),angular.element(l).css({height:e,width:f}),g=f/e,d=Math.ceil(k/g),a.boxWidth=f/k,a.boxHeight=e/d}):console.error("you must provide a target for this directive to build a grid over")}}}]),portfolioApp.directive("about",["$timeout",function(){return{restrict:"E",scope:"=",templateUrl:"views/partials/about.html",link:function(a,b){var c=angular.element(window).innerHeight(),d=c-angular.element("nav").height(),e=angular.element(b.find("article"));e.css({height:d})},controller:["$scope","$element",function(a){var b;a.freezeScroll=function(a){b=b||angular.element("#body-content:first-child"),a===!0?b.addClass("freeze-scroll"):b.removeClass("freeze-scroll")}}]}}]),portfolioApp.directive("concentric",["$timeout",function(){return{restrict:"E",scope:"=",templateUrl:"views/partials/concentric.html",link:function(a,b){var c=(angular.element("body"),angular.element(b),angular.element("#body-content"),angular.element("#logo")),d=angular.element("#concentric-circular"),e=angular.element("#concentric-oval"),f=angular.element(window),g=(angular.element(document),f.innerHeight()),h=angular.element("#contact");c.css({top:.5*g}),d.css({top:.5*g}),e.css({top:.5*g}),h.css({top:.87*g}),f.bind("resize",function(){g=f.innerHeight(),c.css({top:.5*g}),d.css({top:.5*g}),e.css({top:.5*g}),h.css({top:.87*g})}),a.logoLimit=new Array(11),a.ovalLimit=new Array(50),a.circleLimit=new Array(70)},controller:["$scope","$element","$interval","$timeout","$location",function(a,b,c,d){var e,f,g=!0;a.active=!1,a.shimmer=function(){g=!g,a.shimmerActive=f||a.logoLimit.length+1,e||(e=c(function(){a.shimmerActive=g?a.shimmerActive>1?a.shimmerActive-=1:a.logoLimit.length:a.shimmerActive<a.logoLimit.length?a.shimmerActive+=1:1},50))},a.cancelShimmer=function(){e&&(c.cancel(e),f=a.shimmerActive,d(function(){a.shimmerActive=a.logoLimit.length},50),e=void 0)},a.active=0;var h,i=angular.element(window),j=angular.element(document);j.bind("scroll",function(){i.scrollTop()<=2e3&&(e&&(c.cancel(e),f=a.shimmerActive,a.shimmerActive=a.logoLimit.length,e=void 0),h=i.scrollTop()/2e3,a.$apply(a.active=Math.round(50*h)))}),a.radiate=function(){e&&(c.cancel(e),f=a.shimmerActive,a.shimmerActive=a.logoLimit.length,e=void 0);var b=!1;a.active=0,c(function(){if(a.active=b?a.active-=1:a.active+=1,a.active===a.ovalLimit.length&&(b=!0),0===a.active&&b===!0){a.shimmer();d(function(){a.comingSoon=!0})}},40,2*a.ovalLimit.length)}}]}}]),portfolioApp.factory("GetJson",["$http","$q",function(a,b){return{getGallery:function(){var c=b.defer();return a({method:"GET",url:"/data/gallery.json"}).success(function(a){c.resolve(a)}),c.promise},getAbout:function(){var c=b.defer();return a({method:"GET",url:"/data/about.json"}).success(function(a){c.resolve(a)}),c.promise}}}]);